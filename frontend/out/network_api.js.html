<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: network/api.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: network/api.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Module for making API requests and handling responses.
 * @module API
 */

import axios from "axios";
import { ConflictError, UnauthorizedError } from "./errors.js";

/**
 * Base URL for API requests.
 * @constant {string}
 */
const API_BASE =
    process.env.NODE_ENV === "production"
        ? "https://project-3-315-flask.onrender.com"
        : "http://127.0.0.1:5000";

/**
 * Handles the response from an API request.
 * @param {Response} response - The response object from the API request.
 * @returns {Promise&lt;any>} A promise resolving to the parsed response data.
 * @throws {UnauthorizedError} If the response status is 401 (Unauthorized).
 * @throws {ConflictError} If the response status is 409 (Conflict).
 * @throws {Error} If an unknown error occurs.
 */
async function handleResponse(response) {
    const contentType = response.headers.get("content-type");

    if (response.ok) {
        if (contentType &amp;&amp; contentType.includes("application/json")) {
            const json = await response.json();
            return json;
        } else if (contentType &amp;&amp; contentType.includes("text/html")) {
            return response.text();
        } else if (!contentType || response.status === 204) {
            return null;
        } else {
            return response.text();
        }
    } else {
        let errorMessage;
        if (contentType &amp;&amp; contentType.includes("application/json")) {
            const errorBody = await response.json();
            errorMessage = errorBody.error || "Unknown error";
        } else {
            errorMessage = `Request failed with status: ${response.status}`;
        }
        switch (response.status) {
            case 401:
                throw new UnauthorizedError(errorMessage);
            case 409:
                throw new ConflictError(errorMessage);
            default:
                throw new Error(errorMessage);
        }
    }
}

/**
 * Makes a request to the API endpoint.
 * @param {string} endpoint - The endpoint to make the request to.
 * @param {Object} [options={}] - Additional options for the request.
 * @returns {Promise&lt;any>} A promise resolving to the response data.
 */
export async function request(endpoint, options = {}) {
    const response = await fetch(`${API_BASE}${endpoint}`, options);
    return handleResponse(response);
}

export async function getMenuItems() {
    return request("/menu_item_info", { method: "GET" });
}

export async function getOrderMenuItems() {
    return request("/order_menu_item", { method: "GET" });
    // const response = await axios.get(`${API_BASE}/order_menu_item_info`, {
    //     params: {
    //         start_id,
    //         finish_id,
    //     },
    // });

    // return response.data;
}

export async function getOrderMenuItemsFromId(start_id, end_id) {
    // return request("/order_menu_item_f", { method: "GET" });
    const response = await axios.get(`${API_BASE}/order_menu_item_from_id`, {
        params: {
            start_id,
            end_id,
        },
    });

    return response.data;
}

export async function getMenuItemTypes() {
    return request("/menu_item_types", { method: "GET" });
}

export async function getSuppliers() {
    return request("/suppliers", { method: "GET" });
}

export async function getIngredients() {
    return request("/ingredients_info", { method: "GET" });
}

export async function getLanguages() {
    return request("/languages", { method: "GET" });
}

export async function getOrders(start_date, end_date) {
    const response = await axios.get(`${API_BASE}/orders_info`, {
        params: {
            start_date,
            end_date,
        },
    });

    return response.data;
}

export async function getOrdersIds(start_date, end_date) {
    const response = await axios.get(`${API_BASE}/orders_ids`, {
        params: {
            start_date,
            end_date,
        },
    });
    // const orderIds = response.data.map(order => order.id);

    return response.data;
}

export async function getEmployees() {
    return request("/employee_info", { method: "GET" });
}

export async function addEmployee(formData) {
    return request("/add_employee", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function deleteEmployee(formData) {
    return request("/delete_employee", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function translate(text, targetLanguage) {
    return request(`/translate`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ text, targetLanguage }),
    });
}

export async function updateSalary(formData) {
    return request("/salary", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function editMenuItems(formData) {
    return request("/menu_item_edit", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function deleteMenuItems(formData) {
    return request("/menu_item_delete", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function addMenuItem(formData) {
    return request("/menu_item_add", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function submitOrder(formData) {
    return request("/submit_order", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function submitRestockOrder(formData) {
    return request("/restock_order", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function getOrderId() {
    return request("/order_id", { method: "GET" });
}

export async function getItemId(menuItemName) {
    const response = await request(
        `/menu_item_id?name=${encodeURIComponent(menuItemName)}`,
        { method: "GET" }
    );
    return response; // Return the entire response object
}

export async function getItemName(menuItemId) {
    const response = await request(
        `/menu_item_name?id=${encodeURIComponent(menuItemId)}`,
        { method: "GET" }
    );
    return response; // Return the entire response object
}

export async function getIngredientUsage(start_date, end_date) {
    const response = await axios.get(`${API_BASE}/ingredient_usage`, {
        params: {
            start_date,
            end_date,
        },
    });

    return response.data;
}

export async function getOrderTrends(start_date, end_date) {
    const response = await axios.get(`${API_BASE}/order_trends`, {
        params: {
            start_date,
            end_date,
        },
    });

    return response.data;
}

export async function attachMenuItem(formData) {
    return request("/attach_menu_items", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function getTopTen() {
    return request("/top_ten", { method: "GET" });
}

export async function getHighestEmployeeId() {
    return request("/highest_employee_id", { method: "GET" });
}

export async function getCurrent() {
    return request("/in_progress", { method: "GET" });
}

export async function addIngredient(formData) {
    return request("/add_ingredient", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function cancelOrder(formData) {
    return request("/cancelled", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function completeOrder(formData) {
    return request("/completed", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}

export async function deleteOrder(formData) {
    return request("/delete", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
    });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-API.html">API</a></li><li><a href="module-EmployeesPage.html">EmployeesPage</a></li><li><a href="module-InventoryPage.html">InventoryPage</a></li><li><a href="module-LineChart.html">LineChart</a></li><li><a href="module-ManagerView.html">ManagerView</a></li><li><a href="module-MenuPage.html">MenuPage</a></li><li><a href="module-MenuView.html">MenuView</a></li><li><a href="module-Sidebar.html">Sidebar</a></li><li><a href="module-StatsPage.html">StatsPage</a></li></ul><h3>Classes</h3><ul><li><a href="ConflictError.html">ConflictError</a></li><li><a href="HttpError.html">HttpError</a></li><li><a href="UnauthorizedError.html">UnauthorizedError</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Accessibility">Accessibility</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#AverageOrderPriceChart">AverageOrderPriceChart</a></li><li><a href="global.html#BasketContext">BasketContext</a></li><li><a href="global.html#BasketProvider">BasketProvider</a></li><li><a href="global.html#CashierView">CashierView</a></li><li><a href="global.html#CategoryButton">CategoryButton</a></li><li><a href="global.html#FontSizeContext">FontSizeContext</a></li><li><a href="global.html#FontSizeProvider">FontSizeProvider</a></li><li><a href="global.html#IngredientUsageTable">IngredientUsageTable</a></li><li><a href="global.html#MenuItemOrdersHistogram">MenuItemOrdersHistogram</a></li><li><a href="global.html#NavBar">NavBar</a></li><li><a href="global.html#NavigationBar">NavigationBar</a></li><li><a href="global.html#OrderTrendsTable">OrderTrendsTable</a></li><li><a href="global.html#PopularProductsHistogram">PopularProductsHistogram</a></li><li><a href="global.html#TotalOrdersGraph">TotalOrdersGraph</a></li><li><a href="global.html#ZoomContext">ZoomContext</a></li><li><a href="global.html#ZoomProvider">ZoomProvider</a></li><li><a href="global.html#calculateTotalPrice">calculateTotalPrice</a></li><li><a href="global.html#categories">categories</a></li><li><a href="global.html#formatItemName">formatItemName</a></li><li><a href="global.html#getItemNameColor">getItemNameColor</a></li><li><a href="global.html#root">root</a></li><li><a href="global.html#useBasket">useBasket</a></li><li><a href="global.html#useZoom">useZoom</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed May 01 2024 22:59:26 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
