<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/ManagerView/pages/StatsDisplays/MenuItemOrdersHistogram.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/ManagerView/pages/StatsDisplays/MenuItemOrdersHistogram.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import { Bar } from "react-chartjs-2";
import {
    getOrderMenuItemsFromId,
    getItemName,
    getOrders,
} from "../../../../network/api";

/**
 * Represents a histogram component for displaying menu item orders.
 * @module MenuItemOrdersHistogram
 * @param {Object} props - The props object.
 * @param {Date} props.start_date - The start date for filtering orders.
 * @param {Date} props.end_date - The end date for filtering orders.
 */
const MenuItemOrdersHistogram = ({ start_date, end_date }) => {
    /**
     * State to store the labels for the histogram.
     * @type {[Array, function]}
     */
    const [itemLabels, setLabels] = useState([]);

    /**
     * State to store the data for the histogram.
     * @type {[Array, function]}
     */
    const [itemData, setData] = useState({});

    /**
     * State to store the background colors for the histogram bars.
     * @type {[Array, function]}
     */
    const [backgroundColors, setBackgroundColors] = useState([]);

    /**
     * State to store the border colors for the histogram bars.
     * @type {[Array, function]}
     */
    const [borderColors, setBorderColors] = useState({});

    /**
     * Fetches data for the histogram based on the provided start and end dates.
     * @function fetchData
     */

    useEffect(() => {
        // Fetch ingredient usage data when component mounts
        const fetchData = async () => {
            // const topten = await getTopTen();
            ///// TO DO: get order menu items from a timeline ... date -> orders.... get order ids for that timeline... get count of menu items from order_menu_items where the id is from a to b
            const orders = await getOrders(start_date, end_date);
            const order_ids = [];
            // console.log(orders);

            ///// date -> orders.... get order ids for that timeline
            orders.forEach((order) => {
                const orderId = order[0];
                order_ids.push(orderId);
            });
            // console.log(order_ids);
            order_ids.sort();
            // console.log(order_ids);
            const start_id = order_ids[0];
            const finish_id = order_ids[order_ids.length - 1];
            console.log(start_id);
            console.log(finish_id);

            /////  get count of menu items from order_menu_items where the id is from a to b
            const menu_items = await getOrderMenuItemsFromId(
                start_id,
                finish_id
            );
            console.log(menu_items);
            // console.log("here");
            // console.log(all_menu_items);
            // const menu_items = [];

            // all_menu_items.forEach((item) => {
            //     if (order_ids.includes(item.menu_item_id)){
            //         menu_items.push(item);
            //     }
            // });
            // console.log(menu_items);
            const _itemLabels = [];
            const _itemData = [];
            const _backgroundColors = [];
            const _borderColors = [];
            // console.log(menu_items);
            const backgroundColorsBank = [
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
                "rgba(255, 99, 132, 0.2)",
                "rgba(54, 162, 235, 0.2)",
                "rgba(255, 206, 86, 0.2)",
                "rgba(75, 192, 192, 0.2)",
                "rgba(153, 102, 255, 0.2)",
            ];
            const borderColorsBank = [
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
                "rgba(255, 99, 132, 1)",
                "rgba(54, 162, 235, 1)",
                "rgba(255, 206, 86, 1)",
                "rgba(75, 192, 192, 1)",
                "rgba(153, 102, 255, 1)",
            ];

            // console.log(menu_items.length);
            for (let i = 0; i &lt; menu_items.length; i++) {
                const item_id = menu_items[i]["menu_item_id"];
                // console.log(item_id);
                const item_name = await getItemName(item_id);
                // console.log(item_name.item_name);
                _itemLabels.push(item_name.item_id);
                _itemData.push(menu_items[i]["category_count"]);
                _backgroundColors.push(backgroundColorsBank[i % 10]);
                _borderColors.push(borderColorsBank[i % 10]);
            }
            // console.log(_itemLabels);
            setLabels(_itemLabels);
            setData(_itemData);
            setBackgroundColors(_backgroundColors);
            setBorderColors(_borderColors);
        };

        fetchData();
    }, [start_date, end_date]);

    /**
     * Represents the data configuration for the histogram.
     * @type {Object}
     */
    const data = {
        labels: itemLabels,
        datasets: [
            {
                label: "Number of Orders",
                data: itemData,
                backgroundColor: backgroundColors,
                borderColor: borderColors,
                borderWidth: 1,
            },
        ],
    };

    /**
     * Renders the menu item orders histogram component.
     * @returns {JSX.Element} The menu item orders histogram component.
     */

    return (
        &lt;div>
            &lt;h2>Menu Item Orders Histogram&lt;/h2>
            {itemLabels.length > 0 &amp;&amp; &lt;Bar data={data} />}
        &lt;/div>
    );
};

export default MenuItemOrdersHistogram;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AverageOrderPriceChart.html">AverageOrderPriceChart</a></li><li><a href="module-IngredientUsageTable.html">IngredientUsageTable</a></li><li><a href="module-InventoryPage.html">InventoryPage</a></li><li><a href="module-LineChart.html">LineChart</a></li><li><a href="module-MenuItemOrdersHistogram.html">MenuItemOrdersHistogram</a></li></ul><h3>Classes</h3><ul><li><a href="ConflictError.html">ConflictError</a></li><li><a href="UnauthorizedError.html">UnauthorizedError</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Accessibility">Accessibility</a></li><li><a href="global.html#BasketContext">BasketContext</a></li><li><a href="global.html#BasketProvider">BasketProvider</a></li><li><a href="global.html#CashierView">CashierView</a></li><li><a href="global.html#CategoryButton">CategoryButton</a></li><li><a href="global.html#NavBar">NavBar</a></li><li><a href="global.html#NavigationBar">NavigationBar</a></li><li><a href="global.html#ZoomContext">ZoomContext</a></li><li><a href="global.html#ZoomProvider">ZoomProvider</a></li><li><a href="global.html#calculateTotalPrice">calculateTotalPrice</a></li><li><a href="global.html#useBasket">useBasket</a></li><li><a href="global.html#useZoom">useZoom</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed May 01 2024 22:37:41 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
